@page "/counter"
@using MediatR
@using OnlineShop.Domain.Customers.Commands
@inject IMediator _mediator

<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

<p role="status">Current count: @currentCount</p>

<button class="btn btn-primary" @onclick="Create">Create</button>
<button class="btn btn-primary" @onclick="Update">Update</button>
<button class="btn btn-primary" @onclick="IncrementCount">Delete</button>

@code {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }

    private async Task Create()
    {
        var createCommand = new CreateCustomerCommand
        {
            NameStyle = false, 
            Title = "test", 
            FirstName = "test", 
            MiddleName = "test", 
            LastName = "testff",
            Suffix = "suff",
            CompanyName = "Dummy",
            SalesPerson = "|f", 
            EmailAddress = "stupid.email.com", 
            Phone = "5552234", 
            Password = "few"
        };

        await _mediator.Send(createCommand);
    }

    private async Task Update()
    {
        var updateCustomerCommand = new UpdateCustomerCommand()
        {
            Id = 30123,
            NameStyle = false,
            Title = "test_up",
            FirstName = "test_up",
            MiddleName = "test_up",
            LastName = "testff_up",
            Suffix = "suff_up",
            CompanyName = "Dummy",
            SalesPerson = "|f",
            EmailAddress = "stupid.email.com",
            Phone = "5552234",
            Password = "NewPass"
        };

        await _mediator.Send(updateCustomerCommand);
    }
}
